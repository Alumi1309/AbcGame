<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Alphabet Game</title>
  </head>
  <body>
    <h1>Alphabet Game</h1>
    <p id="letter"></p>
    <button id="play">Play Sound</button>
    <button id="start">Start Voice Recognition</button>
    <p id="result"></p>

    <script>
      let currentLetter = "";
      const letters = "abcdefghijklmnopqrstuvwxyz";

      function playSound() {
        const audio = new Audio(`./audio/${currentLetter}.mp3`);
        audio.play();
      }

      function generateLetter() {
        const randomIndex = Math.floor(Math.random() * letters.length);
        const letter = letters[randomIndex];
        const randomCase = Math.random() < 0.5 ? "lower" : "upper";
        currentLetter = randomCase === "lower" ? letter : letter.toUpperCase();
        document.getElementById("letter").textContent = currentLetter;
      }

      function checkAnswer(answer) {
        if (answer === currentLetter) {
          document.getElementById("result").textContent = "Correct!";
          generateLetter();
          playSound();
        } else {
          document.getElementById("result").textContent = "Incorrect!";
        }
      }

      document.getElementById("play").addEventListener("click", playSound);

      document.getElementById("start").addEventListener("click", () => {
        window.SpeechRecognition =
          window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new window.SpeechRecognition();
        recognition.lang = "en-US";

        recognition.addEventListener("result", (event) => {
          const transcript = event.results[0][0].transcript.trim().toLowerCase();
          document.getElementById("result").textContent = transcript;
          checkAnswer(transcript);
        });

        recognition.addEventListener("end", recognition.start);

        recognition.start();
      });

      generateLetter();
      playSound();
    </script>
  </body>
</html>
